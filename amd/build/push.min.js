var __awaiter=this&&this.__awaiter||function(r,e,t,o){return new(t||(t=Promise))((function(i,n){function s(r){try{c(o.next(r))}catch(r){n(r)}}function a(r){try{c(o.throw(r))}catch(r){n(r)}}function c(r){var e;r.done?i(r.value):(e=r.value,e instanceof t?e:new t((function(r){r(e)}))).then(s,a)}c((o=o.apply(r,e||[])).next())}))};define(["require","exports"],(function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(r){this._path=r}update(){return __awaiter(this,void 0,void 0,(function*(){if("object"!=typeof navigator||"object"!=typeof navigator.serviceWorker)throw Error("Browser does not support service worker.");if("object"!=typeof this._worker){let r=yield navigator.serviceWorker.getRegistration(this._path);"object"==typeof r&&(this._worker=r,yield this._worker.update())}}))}subscribe(){return __awaiter(this,void 0,void 0,(function*(){if("object"!=typeof navigator||"object"!=typeof navigator.serviceWorker)throw Error("Browser does not support service worker.");if("object"!=typeof window||"function"!=typeof window.PushManager)throw Error("Browser does not support push.");if(yield this.requestPermission(),yield this.update(),console.log(this._worker),"object"!=typeof this._worker&&(this._worker=yield navigator.serviceWorker.register(this._path),"object"!=typeof this._worker))throw Error("Could not register worker")}))}unsubscribe(){return __awaiter(this,void 0,void 0,(function*(){if(yield this.update(),"object"==typeof this._worker){if(yield this._worker.unregister())return}throw Error("Could not unregister worker.")}))}requestPermission(){return __awaiter(this,void 0,void 0,(function*(){if("object"==typeof Notification||"function"!=typeof Notification.requestPermission)throw Error("Browser does not support notifications.");if("granted"===Notification.permission)return;if("granted"!==(yield Notification.requestPermission()))throw Error("No permission")}))}workerJavaScript(){console.log("working hard")}}}));